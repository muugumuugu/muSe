function gettitle(r){files[r];return files[r].replace(/.*_ /,"").replace(".mp3","")}let curr=0,prev=0,playlist=[],radio,plstr;function next(){prev=curr,curr++,curr%=nsongs,player.src="../music/"+files[playlist[curr]],radio.selected(curr),document.title=gettitle(playlist[curr]),player.play()}function prevs(){curr=prev,prev--,prev+=nsongs,prev%=nsongs,player.src="../music/"+files[playlist[curr]],radio.selected(curr),document.title=gettitle(playlist[curr]),player.play()}function playspecific(r){prev=curr,curr=radio.value()||0,player.src="../music/"+files[playlist[curr]],document.title=gettitle(playlist[curr]),player.play()}function getpl(){playlist=[],radio=createRadio();for(let r=0;r<nsongs;r++)playlist.push(ngbrs[r].index),radio.option(r,gettitle(playlist[r]));radio.parent(Radio);const r=getplstr(playlist);select("#r"+radct).elt.onclick=function(){saveStrings(r,"playlist.m3u")},radio.elt.onchange=function(){playspecific()},player.elt.onended=function(){next()},prevs()}function getplstr(t){plstr=[];for(let e=0;e<t.length;e++){let r=files[t[e]];plstr.push("#EXTINF: "+r.replace(/.* _ /,"")),plstr.push("music/"+r)}return plstr}